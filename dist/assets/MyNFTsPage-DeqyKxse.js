import{Y as R,Z as j,_ as W,r,$ as _,x as F,a0 as A,B,a1 as U,a2 as Q,z as q,a3 as H,O as P,a4 as Y,I as g,a5 as G,a6 as k,a7 as K,E as S,W as J,j as e,L as Z,J as m,M as b,K as x,T as O,S as X,G as y,a8 as V}from"./index-C3POMFfo.js";import{a as z,u as ee}from"./useApi-DnSGaFtl.js";import{E as se}from"./eye-DvvUFXNM.js";import{p as re}from"./box-u8m9NNA-.js";import{P as te}from"./plus-5W98KuP3.js";import{o as ae}from"./grid-BsyIQd3D.js";import{u as E}from"./text-field-DVea379b.js";const ie=["1","2","3","4"],ne={...W,align:{type:"enum",className:"rt-r-align",values:["start","center"],default:"center"},size:{type:"enum",className:"rt-r-size",values:ie,default:"3",responsive:!0},width:j.width,minWidth:j.minWidth,maxWidth:{...j.maxWidth,default:"600px"},...R},v=s=>r.createElement(_,{...s,modal:!0});v.displayName="Dialog.Root";const le=r.forwardRef(({children:s,...t},n)=>r.createElement(K,{...t,ref:n,asChild:!0},k(s)));le.displayName="Dialog.Trigger";const N=r.forwardRef(({align:s,...t},n)=>{const{align:i,...c}=ne,{className:l}=F({align:s},{align:i}),{className:p,forceMount:u,container:h,...d}=F(t,c);return r.createElement(A,{container:h,forceMount:u},r.createElement(B,{asChild:!0},r.createElement(U,{className:"rt-BaseDialogOverlay rt-DialogOverlay"},r.createElement("div",{className:"rt-BaseDialogScroll rt-DialogScroll"},r.createElement("div",{className:`rt-BaseDialogScrollPadding rt-DialogScrollPadding ${l}`},r.createElement(Q,{...d,ref:n,className:q("rt-BaseDialogContent","rt-DialogContent",p)}))))))});N.displayName="Dialog.Content";const T=r.forwardRef((s,t)=>r.createElement(H,{asChild:!0},r.createElement(P,{size:"5",mb:"3",trim:"start",...s,asChild:!1,ref:t})));T.displayName="Dialog.Title";const C=r.forwardRef((s,t)=>r.createElement(Y,{asChild:!0},r.createElement(g,{as:"p",size:"3",...s,asChild:!1,ref:t})));C.displayName="Dialog.Description";const w=r.forwardRef(({children:s,...t},n)=>r.createElement(G,{...t,ref:n,asChild:!0},k(s)));w.displayName="Dialog.Close";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ce=S("send",oe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ge=S("tag",de),me=async s=>{const n=J.filter(i=>i.owner==="0x123456789abcdef").map(i=>({...i,owner:s}));return Promise.resolve(n)},he=async s=>(console.log("Creating listing:",s),Promise.resolve()),ue=async s=>(console.log("Canceling listing:",s),Promise.resolve()),pe=async s=>(console.log("Transferring NFT:",s),Promise.resolve());function xe(s){return ee({queryKey:["user-nfts",s||""],queryFn:()=>s?me(s):Promise.resolve([]),enabled:!!s})}function fe(){return z({mutationFn:he,invalidateQueries:[["user-nfts"],["listings"]]})}function ye(){return z({mutationFn:ue,invalidateQueries:[["user-nfts"],["listings"]]})}function je(){return z({mutationFn:pe,invalidateQueries:[["user-nfts"]]})}function ve({nft:s,onListForSale:t,onCancelListing:n,onTransfer:i,onViewDetails:c}){var u,h,d,f;const l=s.status==="active"&&s.price,p=o=>o?`${Number(o)/1e9} SUI`:"Not listed";return e.jsx(Z,{style:{background:"var(--gray-6)",color:"white",cursor:"pointer",transition:"all 0.2s ease",position:"relative"},className:"hover:scale-105 hover:shadow-lg",children:e.jsxs(m,{direction:"column",gap:"3",children:[((u=s.metadata)==null?void 0:u.image)&&e.jsxs(re,{style:{position:"relative"},children:[e.jsx("img",{src:s.metadata.image,alt:((h=s.metadata)==null?void 0:h.name)||"NFT",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"8px"}}),l&&e.jsx(b,{color:"green",variant:"solid",style:{position:"absolute",top:"8px",right:"8px"},children:"Listed"})]}),e.jsxs(m,{direction:"column",gap:"2",children:[e.jsx(g,{weight:"bold",size:"4",children:((d=s.metadata)==null?void 0:d.name)||"Unknown Item"}),e.jsx(g,{size:"2",color:"gray",children:(f=s.metadata)==null?void 0:f.description}),e.jsxs(m,{justify:"between",align:"center",children:[s.type_name&&e.jsx(b,{color:"blue",variant:"soft",children:s.type_name}),e.jsx(g,{weight:"bold",size:"3",color:l?"green":"gray",children:p(s.price)})]}),e.jsxs(m,{gap:"2",style:{marginTop:"8px"},children:[e.jsxs(x,{size:"2",variant:"ghost",onClick:o=>{o.stopPropagation(),c==null||c(s.id)},style:{flex:1},children:[e.jsx(se,{size:14}),"View"]}),l?e.jsx(x,{size:"2",variant:"outline",color:"red",onClick:o=>{o.stopPropagation(),n==null||n(s.id)},style:{flex:1},children:"Cancel"}):e.jsxs(x,{size:"2",variant:"outline",color:"green",onClick:o=>{o.stopPropagation(),t==null||t(s.id)},style:{flex:1},children:[e.jsx(ge,{size:14}),"List"]}),e.jsx(x,{size:"2",variant:"ghost",onClick:o=>{o.stopPropagation(),i==null||i(s.id)},children:e.jsx(ce,{size:14})})]})]})]})})}function Ne({onListForSale:s,onCancelListing:t,onTransfer:n}){const i=O(),c=X(),{data:l,isLoading:p,error:u}=xe(i==null?void 0:i.address),h=d=>{c(`/listing/${d}`)};return i?p?e.jsx(y,{style:{padding:"2rem",textAlign:"center"},children:e.jsx(g,{style:{color:"white"},children:"Loading your NFTs..."})}):u?e.jsx(y,{style:{padding:"2rem",textAlign:"center"},children:e.jsx(g,{style:{color:"red"},children:"Error loading your NFTs"})}):!l||l.length===0?e.jsx(y,{style:{padding:"4rem 2rem",textAlign:"center"},children:e.jsxs(m,{direction:"column",align:"center",gap:"4",children:[e.jsx(te,{size:64,style:{color:"var(--gray-9)"}}),e.jsx(g,{size:"6",weight:"bold",style:{color:"white"},children:"No NFTs Found"}),e.jsx(g,{size:"3",color:"gray",children:"You don't own any NFTs yet. Start by purchasing from the marketplace!"}),e.jsx(x,{size:"3",onClick:()=>c("/"),children:"Browse Marketplace"})]})}):e.jsx(y,{style:{padding:"1rem"},children:e.jsx(ae,{columns:{initial:"1",sm:"2",md:"3",lg:"4"},gap:"4",children:l.map(d=>e.jsx(ve,{nft:d,onListForSale:s,onCancelListing:t,onTransfer:n,onViewDetails:h},d.id))})}):e.jsx(y,{style:{padding:"4rem 2rem",textAlign:"center"},children:e.jsxs(m,{direction:"column",align:"center",gap:"4",children:[e.jsx(V,{size:64,style:{color:"var(--gray-9)"}}),e.jsx(g,{size:"6",weight:"bold",style:{color:"white"},children:"Connect Your Wallet"}),e.jsx(g,{size:"3",color:"gray",children:"Connect your Sui wallet to view and manage your NFTs"})]})})}function Pe(){const s=O(),{mutate:t}=fe(),{mutate:n}=ye(),{mutate:i}=je(),[c,l]=r.useState({isOpen:!1}),[p,u]=r.useState({isOpen:!1}),[h,d]=r.useState(""),[f,o]=r.useState(""),$=a=>{l({isOpen:!0,nftId:a}),d("")},D=a=>{s!=null&&s.address&&n({listingId:a,userAddress:s.address})},L=a=>{u({isOpen:!0,nftId:a}),o("")},M=()=>{if(!(s!=null&&s.address)||!c.nftId||!h)return;const a=(parseFloat(h)*1e9).toString();t({nftId:c.nftId,price:a,userAddress:s.address}),l({isOpen:!1})},I=()=>{if(!(s!=null&&s.address)||!p.nftId||!f)return;const a=`0x${Math.random().toString(16).substr(2,64)}`;i({nftId:p.nftId,fromAddress:s.address,toAddress:f,txHash:a}),u({isOpen:!1})};return e.jsx(y,{style:{maxWidth:"1400px",margin:"0 auto"},children:e.jsxs(m,{direction:"column",gap:"4",children:[e.jsx(m,{justify:"between",align:"center",style:{padding:"1rem 0"},children:e.jsx(P,{size:"6",style:{color:"white"},children:"My NFTs"})}),e.jsx(Ne,{onListForSale:$,onCancelListing:D,onTransfer:L}),e.jsx(v,{open:c.isOpen,onOpenChange:a=>l({isOpen:a}),children:e.jsxs(N,{style:{maxWidth:450},children:[e.jsx(T,{children:"List NFT for Sale"}),e.jsx(C,{size:"2",mb:"4",children:"Set a price for your NFT in SUI tokens."}),e.jsx(m,{direction:"column",gap:"3",children:e.jsxs("label",{children:[e.jsx(g,{as:"div",size:"2",mb:"1",weight:"bold",children:"Price (SUI)"}),e.jsx(E,{placeholder:"0.00",type:"number",step:"0.01",value:h,onChange:a=>d(a.target.value)})]})}),e.jsxs(m,{gap:"3",mt:"4",justify:"end",children:[e.jsx(w,{children:e.jsx(x,{variant:"soft",color:"gray",children:"Cancel"})}),e.jsx(x,{onClick:M,disabled:!h,children:"List for Sale"})]})]})}),e.jsx(v,{open:p.isOpen,onOpenChange:a=>u({isOpen:a}),children:e.jsxs(N,{style:{maxWidth:450},children:[e.jsx(T,{children:"Transfer NFT"}),e.jsx(C,{size:"2",mb:"4",children:"Enter the recipient's Sui address to transfer this NFT."}),e.jsx(m,{direction:"column",gap:"3",children:e.jsxs("label",{children:[e.jsx(g,{as:"div",size:"2",mb:"1",weight:"bold",children:"Recipient Address"}),e.jsx(E,{placeholder:"0x...",value:f,onChange:a=>o(a.target.value)})]})}),e.jsxs(m,{gap:"3",mt:"4",justify:"end",children:[e.jsx(w,{children:e.jsx(x,{variant:"soft",color:"gray",children:"Cancel"})}),e.jsx(x,{onClick:I,disabled:!f,color:"orange",children:"Transfer"})]})]})})]})})}export{Pe as MyNFTsPage};
